# PrimeBody Analytics Implementation\n\nThis document describes the comprehensive analytics and tracking system implemented for the PrimeBody landing page.\n\n## Overview\n\nThe analytics system provides:\n- **Multi-provider support**: Google Analytics 4, Plausible, Facebook Pixel, Twitter Pixel, LinkedIn Insight, Hotjar\n- **Privacy compliance**: GDPR/CCPA compliant with consent management\n- **Performance tracking**: Core Web Vitals, bundle analysis, component performance\n- **Conversion tracking**: User journeys, funnel analysis, goal completion\n- **Error monitoring**: JavaScript errors, API failures, validation errors\n- **User behavior**: Scroll depth, time on page, feature usage, A/B testing\n\n## Architecture\n\n### Core Components\n\n1. **Analytics Manager** (`src/lib/analytics.ts`)\n   - Central analytics orchestration\n   - Multi-provider event distribution\n   - Consent management\n   - Event queuing and batching\n\n2. **Analytics Hooks** (`src/hooks/use-analytics.ts`)\n   - React hooks for component-level tracking\n   - Automatic event binding\n   - Performance monitoring\n\n3. **Tracked Components** (`src/components/analytics/tracked-components.tsx`)\n   - Pre-built components with analytics\n   - Button, Link, Form, Section tracking\n   - Social sharing integration\n\n4. **Provider Integration** (`src/components/analytics/google-analytics.tsx`)\n   - External service integration\n   - Script loading and configuration\n   - Cross-platform event synchronization\n\n## Setup and Configuration\n\n### Environment Variables\n\nCopy `.env.example` to `.env.local` and configure:\n\n```bash\n# Required for Google Analytics\nNEXT_PUBLIC_GA4_MEASUREMENT_ID=G-XXXXXXXXXX\n\n# Optional providers\nNEXT_PUBLIC_PLAUSIBLE_DOMAIN=primebody.app\nNEXT_PUBLIC_FB_PIXEL_ID=123456789\nNEXT_PUBLIC_HOTJAR_ID=123456\n\n# Privacy settings\nNEXT_PUBLIC_REQUIRE_ANALYTICS_CONSENT=true\n```\n\n### Provider Setup\n\n1. **Google Analytics 4**\n   - Create GA4 property\n   - Copy Measurement ID\n   - Configure enhanced ecommerce\n\n2. **Plausible Analytics**\n   - Add domain to Plausible\n   - Configure goals and funnels\n   - Optional: self-hosted instance\n\n3. **Facebook Pixel**\n   - Create Facebook Pixel\n   - Configure conversion events\n   - Set up Conversions API (optional)\n\n### Application Integration\n\n1. **Wrap your app with AnalyticsProvider**:\n\n```tsx\nimport { AnalyticsProvider } from '@/components/analytics/analytics-provider';\nimport { AnalyticsSetup } from '@/components/analytics/google-analytics';\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html>\n      <head>\n        <AnalyticsSetup />\n      </head>\n      <body>\n        <AnalyticsProvider>\n          {children}\n        </AnalyticsProvider>\n      </body>\n    </html>\n  );\n}\n```\n\n2. **Add consent banner**:\n\n```tsx\nimport { ConsentBanner } from '@/components/analytics/analytics-provider';\n\nexport default function HomePage() {\n  return (\n    <div>\n      {/* Your content */}\n      <ConsentBanner />\n    </div>\n  );\n}\n```\n\n## Usage Examples\n\n### Basic Event Tracking\n\n```tsx\nimport { analytics, trackConversion } from '@/lib/analytics';\n\n// Track custom event\nanalytics.track('button_click', 'engagement', {\n  buttonText: 'Get Started',\n  location: 'hero_section'\n});\n\n// Track conversion\ntrackConversion.ctaClick('Start Your Transformation', 'hero');\n```\n\n### Component Tracking\n\n```tsx\nimport { TrackedButton, TrackedSection } from '@/components/analytics/tracked-components';\n\n// Tracked button with automatic analytics\n<TrackedButton \n  trackingCategory=\"cta\"\n  ctaText=\"Get Started\"\n  ctaLocation=\"hero\"\n  onClick={handleClick}\n>\n  Start Your Transformation\n</TrackedButton>\n\n// Tracked section with visibility tracking\n<TrackedSection \n  sectionName=\"features\"\n  trackingProperties={{ sectionType: 'product_features' }}\n>\n  {/* Section content */}\n</TrackedSection>\n```\n\n### Hook-based Tracking\n\n```tsx\nimport { usePageTracking, useScrollTracking, useClickTracking } from '@/hooks/use-analytics';\n\nfunction MyComponent() {\n  // Automatic page tracking\n  usePageTracking('home_page', { version: 'v2' });\n  \n  // Scroll depth tracking\n  const scrollDepth = useScrollTracking(25); // Track every 25%\n  \n  // Click tracking\n  const { trackCTAClick } = useClickTracking();\n  \n  return (\n    <button onClick={trackCTAClick('Join Now', 'header')}>\n      Join Now\n    </button>\n  );\n}\n```\n\n### Form Tracking\n\n```tsx\nimport { TrackedForm } from '@/components/analytics/tracked-components';\nimport { useFormTracking } from '@/hooks/use-analytics';\n\nfunction RegistrationForm() {\n  const { trackFormStart, trackFormComplete, trackFormError } = useFormTracking('registration');\n  \n  return (\n    <TrackedForm \n      formName=\"registration\"\n      onSubmit={handleSubmit}\n    >\n      {/* Form fields */}\n    </TrackedForm>\n  );\n}\n```\n\n## Event Types and Categories\n\n### Conversion Events\n- `cta_click` - Call-to-action interactions\n- `registration_start` - User begins registration\n- `registration_complete` - User completes registration\n- `wallet_connect` - Web3 wallet connection\n- `email_signup` - Email list subscription\n\n### Engagement Events\n- `scroll_depth` - Page scroll milestones\n- `time_on_page` - Time spent on page\n- `section_view` - Section visibility\n- `feature_explore` - Feature interaction\n- `demo_view` - Demo content viewing\n\n### Navigation Events\n- `link_click` - Internal/external link clicks\n- `button_click` - Button interactions\n- `menu_open/close` - Navigation menu usage\n\n### Error Events\n- `javascript_error` - Client-side errors\n- `api_error` - API request failures\n- `validation_error` - Form validation failures\n\n### Performance Events\n- `page_performance` - Core Web Vitals\n- `component_render` - Component render times\n- `bundle_size` - JavaScript bundle metrics\n\n## Privacy and Compliance\n\n### GDPR Compliance\n- Consent banner with clear opt-in/opt-out\n- Data retention policies (26 months)\n- Right to data export and deletion\n- Cookie categorization (essential, analytics, marketing)\n\n### Data Collection\n- **Personal Data**: Only with explicit consent\n- **Anonymous Data**: Aggregated usage statistics\n- **Technical Data**: Performance and error metrics\n- **Behavioral Data**: User interaction patterns\n\n### User Rights\n- View collected data\n- Export personal data\n- Delete personal data\n- Withdraw consent\n- Opt-out of specific tracking\n\n## Performance Monitoring\n\n### Core Web Vitals\n- **LCP** (Largest Contentful Paint): < 2.5s\n- **FID** (First Input Delay): < 100ms\n- **CLS** (Cumulative Layout Shift): < 0.1\n\n### Custom Metrics\n- Bundle size tracking\n- Component render performance\n- API response times\n- Memory usage monitoring\n\n### Performance Budget\n- Total bundle: 500KB\n- Main chunk: 250KB\n- Async chunks: 100KB each\n- Images: 2MB total\n\n## A/B Testing and Experiments\n\n### Setup\n```tsx\nimport { analyticsUtils } from '@/lib/analytics-utils';\n\n// Track experiment variant\nanalyticsUtils.trackABTest('hero_cta_text', 'variant_b', {\n  originalText: 'Get Started',\n  variantText: 'Start Your Journey'\n});\n```\n\n### Conversion Tracking\n```tsx\nimport { useExperimentTracking } from '@/hooks/use-analytics';\n\nconst { trackConversion } = useExperimentTracking();\n\n// Track experiment conversion\ntrackConversion('hero_cta_text', 'variant_b', 'registration');\n```\n\n## Debugging and Development\n\n### Development Mode\n- Console logging of all events\n- Analytics debug panel\n- Real-time event monitoring\n- Provider status indicators\n\n### Debug Components\n```tsx\nimport { AnalyticsDebug } from '@/components/analytics/analytics-provider';\n\n// Add to development builds\n{process.env.NODE_ENV === 'development' && <AnalyticsDebug />}\n```\n\n### Testing\n```bash\n# Test analytics in development\nNEXT_PUBLIC_ENABLE_ANALYTICS_IN_DEV=true npm run dev\n\n# Validate configuration\nnpm run analytics:validate\n\n# Generate analytics report\nnpm run analytics:report\n```\n\n## Best Practices\n\n### Event Naming\n- Use snake_case for event names\n- Be descriptive but concise\n- Include context in properties\n- Avoid PII in event names\n\n### Data Collection\n- Collect only necessary data\n- Respect user privacy preferences\n- Implement data retention policies\n- Regular data audits\n\n### Performance\n- Batch events when possible\n- Use async loading for scripts\n- Implement sampling for high-volume events\n- Monitor analytics impact on performance\n\n### Privacy\n- Clear consent mechanisms\n- Transparent data usage\n- Easy opt-out processes\n- Regular privacy policy updates\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Events not tracking**\n   - Check consent status\n   - Verify provider configuration\n   - Check network requests\n   - Review console errors\n\n2. **Performance impact**\n   - Enable sampling\n   - Reduce event frequency\n   - Optimize event properties\n   - Use async loading\n\n3. **Privacy compliance**\n   - Update consent banner\n   - Review data collection\n   - Implement data deletion\n   - Update privacy policy\n\n### Debug Commands\n\n```javascript\n// Check analytics status\nanalytics.getStatus();\n\n// View queued events\nconsole.log(analytics.getStatus().queuedEvents);\n\n// Test event tracking\nanalytics.track('test_event', 'engagement', { test: true });\n\n// Check consent status\nprivacyUtils.hasConsent();\n```\n\n## Migration Guide\n\n### From Universal Analytics\n1. Update measurement ID format\n2. Migrate custom dimensions\n3. Update event structure\n4. Test conversion tracking\n\n### Adding New Providers\n1. Create provider configuration\n2. Add environment variables\n3. Implement provider class\n4. Update analytics setup\n5. Test event delivery\n\n## Support and Resources\n\n- [Google Analytics 4 Documentation](https://developers.google.com/analytics/devguides/collection/ga4)\n- [Plausible Analytics API](https://plausible.io/docs)\n- [GDPR Compliance Guide](https://gdpr.eu/)\n- [Web Vitals Documentation](https://web.dev/vitals/)\n\nFor questions or issues, please refer to the project documentation or create an issue in the repository."