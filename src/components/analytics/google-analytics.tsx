'use client';\n\nimport Script from 'next/script';\nimport { useEffect } from 'react';\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport { analytics } from '@/lib/analytics';\n\n// Google Analytics component\ninterface GoogleAnalyticsProps {\n  measurementId?: string;\n}\n\nexport function GoogleAnalytics({ measurementId }: GoogleAnalyticsProps) {\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n  \n  const GA_MEASUREMENT_ID = measurementId || process.env.NEXT_PUBLIC_GA4_MEASUREMENT_ID;\n\n  useEffect(() => {\n    if (!GA_MEASUREMENT_ID) return;\n    \n    const url = pathname + searchParams.toString();\n    \n    // Track page view\n    if (window.gtag) {\n      window.gtag('config', GA_MEASUREMENT_ID, {\n        page_location: url,\n        page_title: document.title,\n      });\n    }\n    \n    // Also track with our analytics system\n    analytics.page(pathname, {\n      search: searchParams.toString(),\n      url,\n    });\n  }, [pathname, searchParams, GA_MEASUREMENT_ID]);\n\n  if (!GA_MEASUREMENT_ID) {\n    return null;\n  }\n\n  return (\n    <>\n      <Script\n        src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}\n        strategy=\"afterInteractive\"\n      />\n      <Script\n        id=\"google-analytics\"\n        strategy=\"afterInteractive\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '${GA_MEASUREMENT_ID}', {\n              page_location: window.location.href,\n              page_title: document.title,\n              send_page_view: false\n            });\n          `,\n        }}\n      />\n    </>\n  );\n}\n\n// Plausible Analytics component\ninterface PlausibleAnalyticsProps {\n  domain?: string;\n  customDomain?: string;\n}\n\nexport function PlausibleAnalytics({ domain, customDomain }: PlausibleAnalyticsProps) {\n  const PLAUSIBLE_DOMAIN = domain || process.env.NEXT_PUBLIC_PLAUSIBLE_DOMAIN;\n  const PLAUSIBLE_CUSTOM_DOMAIN = customDomain || process.env.NEXT_PUBLIC_PLAUSIBLE_CUSTOM_DOMAIN;\n  \n  const scriptSrc = PLAUSIBLE_CUSTOM_DOMAIN \n    ? `${PLAUSIBLE_CUSTOM_DOMAIN}/js/script.js`\n    : 'https://plausible.io/js/script.js';\n\n  if (!PLAUSIBLE_DOMAIN) {\n    return null;\n  }\n\n  return (\n    <Script\n      src={scriptSrc}\n      data-domain={PLAUSIBLE_DOMAIN}\n      strategy=\"afterInteractive\"\n    />\n  );\n}\n\n// Facebook Pixel component\ninterface FacebookPixelProps {\n  pixelId?: string;\n}\n\nexport function FacebookPixel({ pixelId }: FacebookPixelProps) {\n  const FB_PIXEL_ID = pixelId || process.env.NEXT_PUBLIC_FB_PIXEL_ID;\n\n  if (!FB_PIXEL_ID) {\n    return null;\n  }\n\n  return (\n    <>\n      <Script\n        id=\"facebook-pixel\"\n        strategy=\"afterInteractive\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            !function(f,b,e,v,n,t,s)\n            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n            n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n            n.queue=[];t=b.createElement(e);t.async=!0;\n            t.src=v;s=b.getElementsByTagName(e)[0];\n            s.parentNode.insertBefore(t,s)}(window, document,'script',\n            'https://connect.facebook.net/en_US/fbevents.js');\n            fbq('init', '${FB_PIXEL_ID}');\n            fbq('track', 'PageView');\n          `,\n        }}\n      />\n      <noscript>\n        <img\n          height=\"1\"\n          width=\"1\"\n          style={{ display: 'none' }}\n          src={`https://www.facebook.com/tr?id=${FB_PIXEL_ID}&ev=PageView&noscript=1`}\n          alt=\"Facebook Pixel\"\n        />\n      </noscript>\n    </>\n  );\n}\n\n// Twitter Pixel component\ninterface TwitterPixelProps {\n  pixelId?: string;\n}\n\nexport function TwitterPixel({ pixelId }: TwitterPixelProps) {\n  const TWITTER_PIXEL_ID = pixelId || process.env.NEXT_PUBLIC_TWITTER_PIXEL_ID;\n\n  if (!TWITTER_PIXEL_ID) {\n    return null;\n  }\n\n  return (\n    <Script\n      id=\"twitter-pixel\"\n      strategy=\"afterInteractive\"\n      dangerouslySetInnerHTML={{\n        __html: `\n          !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);\n          },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',\n          a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');\n          twq('init','${TWITTER_PIXEL_ID}');\n          twq('track','PageView');\n        `,\n      }}\n    />\n  );\n}\n\n// LinkedIn Insight Tag component\ninterface LinkedInInsightProps {\n  partnerId?: string;\n}\n\nexport function LinkedInInsight({ partnerId }: LinkedInInsightProps) {\n  const LINKEDIN_PARTNER_ID = partnerId || process.env.NEXT_PUBLIC_LINKEDIN_PARTNER_ID;\n\n  if (!LINKEDIN_PARTNER_ID) {\n    return null;\n  }\n\n  return (\n    <>\n      <Script\n        id=\"linkedin-insight\"\n        strategy=\"afterInteractive\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            _linkedin_partner_id = \"${LINKEDIN_PARTNER_ID}\";\n            window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];\n            window._linkedin_data_partner_ids.push(_linkedin_partner_id);\n          `,\n        }}\n      />\n      <Script\n        src=\"https://snap.licdn.com/li.lms-analytics/insight.min.js\"\n        strategy=\"afterInteractive\"\n      />\n      <noscript>\n        <img\n          height=\"1\"\n          width=\"1\"\n          style={{ display: 'none' }}\n          alt=\"LinkedIn Insight\"\n          src={`https://px.ads.linkedin.com/collect/?pid=${LINKEDIN_PARTNER_ID}&fmt=gif`}\n        />\n      </noscript>\n    </>\n  );\n}\n\n// Hotjar component\ninterface HotjarProps {\n  hjid?: string;\n  hjsv?: string;\n}\n\nexport function Hotjar({ hjid, hjsv }: HotjarProps) {\n  const HOTJAR_ID = hjid || process.env.NEXT_PUBLIC_HOTJAR_ID;\n  const HOTJAR_SV = hjsv || process.env.NEXT_PUBLIC_HOTJAR_SV || '6';\n\n  if (!HOTJAR_ID) {\n    return null;\n  }\n\n  return (\n    <Script\n      id=\"hotjar\"\n      strategy=\"afterInteractive\"\n      dangerouslySetInnerHTML={{\n        __html: `\n          (function(h,o,t,j,a,r){\n            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n            h._hjSettings={hjid:${HOTJAR_ID},hjsv:${HOTJAR_SV}};\n            a=o.getElementsByTagName('head')[0];\n            r=o.createElement('script');r.async=1;\n            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n            a.appendChild(r);\n          })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\n        `,\n      }}\n    />\n  );\n}\n\n// Comprehensive Analytics Setup component\ninterface AnalyticsSetupProps {\n  enableGA4?: boolean;\n  enablePlausible?: boolean;\n  enableFacebookPixel?: boolean;\n  enableTwitterPixel?: boolean;\n  enableLinkedInInsight?: boolean;\n  enableHotjar?: boolean;\n}\n\nexport function AnalyticsSetup({\n  enableGA4 = true,\n  enablePlausible = true,\n  enableFacebookPixel = false,\n  enableTwitterPixel = false,\n  enableLinkedInInsight = false,\n  enableHotjar = false,\n}: AnalyticsSetupProps) {\n  return (\n    <>\n      {enableGA4 && <GoogleAnalytics />}\n      {enablePlausible && <PlausibleAnalytics />}\n      {enableFacebookPixel && <FacebookPixel />}\n      {enableTwitterPixel && <TwitterPixel />}\n      {enableLinkedInInsight && <LinkedInInsight />}\n      {enableHotjar && <Hotjar />}\n    </>\n  );\n}\n\n// Custom event tracking functions for external services\nexport const externalTracking = {\n  // Google Analytics events\n  trackGA4Event: (eventName: string, parameters?: Record<string, any>) => {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', eventName, parameters);\n    }\n  },\n\n  // Facebook Pixel events\n  trackFBEvent: (eventName: string, parameters?: Record<string, any>) => {\n    if (typeof window !== 'undefined' && (window as any).fbq) {\n      (window as any).fbq('track', eventName, parameters);\n    }\n  },\n\n  // Twitter Pixel events\n  trackTwitterEvent: (eventName: string, parameters?: Record<string, any>) => {\n    if (typeof window !== 'undefined' && (window as any).twq) {\n      (window as any).twq('track', eventName, parameters);\n    }\n  },\n\n  // LinkedIn events\n  trackLinkedInEvent: (conversionId: string) => {\n    if (typeof window !== 'undefined' && (window as any).lintrk) {\n      (window as any).lintrk('track', { conversion_id: conversionId });\n    }\n  },\n\n  // Hotjar events\n  trackHotjarEvent: (eventName: string) => {\n    if (typeof window !== 'undefined' && (window as any).hj) {\n      (window as any).hj('event', eventName);\n    }\n  },\n\n  // Track conversion across all platforms\n  trackConversionAcrossAll: (eventName: string, value?: number, currency: string = 'USD') => {\n    // Google Analytics\n    externalTracking.trackGA4Event('purchase', {\n      currency,\n      value,\n      transaction_id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    });\n\n    // Facebook Pixel\n    externalTracking.trackFBEvent('Purchase', {\n      currency,\n      value,\n    });\n\n    // Twitter Pixel\n    externalTracking.trackTwitterEvent('Purchase', {\n      currency,\n      value,\n    });\n\n    // Hotjar\n    externalTracking.trackHotjarEvent(eventName);\n  },\n};\n\n// Type declarations for external analytics\ndeclare global {\n  interface Window {\n    gtag: (...args: any[]) => void;\n    fbq: (...args: any[]) => void;\n    twq: (...args: any[]) => void;\n    lintrk: (...args: any[]) => void;\n    hj: (...args: any[]) => void;\n    plausible: (event: string, options?: { props?: Record<string, any> }) => void;\n  }\n}"